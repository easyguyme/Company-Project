## 会员上传需求整理

### 1. 文件格式CSV、XLS和XLSX
| 项目   | 编码  |  bom  |
| --------   | -----:  | :----:  |
| csv    | 必须为UTF-8  |   支持（代码中进行了处理）  |
| xls    |  ANSI(系统默认，不需要进行设置) |   同上  |
| xlsx   |  同上 |   同上  |

> * GBK编码包含在ANSI编码中；

### 2. 字段处理规则
> * checkbox的更新为替换；
> * Tag的更新是添加；
> * 属性的更新也是添加；
  如：一个会员第一次导入了如下属性：name，mobile，email，gender，title；在mobile不变的情况下更新时title为：name，mobile，email，gender，address，zip；那么最终显示的是name，mobile，email，gender，title，address，zip；
> * 单选，多选属性的更新是替换；

### 3. 文档标题验证规则
> * 必填可见的属性必须在导入文档标题栏中出现；
> * 导入文档的标题不能相同，忽略大小写；如：name和NaMe视为相同标题；

### 4.属性支持六种类型（input，email，radio，textarea，checkbox，date）
#### 1.1 input类型（name，mobile等）
##### 1.1.1 name验证
> * 字符串长度为2-30；
> * 单元格的文本格式为默认方可；
> * 依据属性的设置进行db和excel唯一性验证，必填的验证；

##### 1.1.2 mobile验证
> * 格式为T:XXXX或者T：XXXX（冒号支持中英文）；
> * 支持0和1开头的电话号码；
> * 单元格的文本格式为默认方可；
> * 依据属性的设置进行excel唯一性验证，必填的验证；

#### 1.2 email类型
##### 1.2.1 email验证
> * email格式验证（如：xxx@qq.com）；
> * 单元格的文本格式为默认方可；
> * 依据属性的设置进行db和excel唯一性验证，必填的验证；

#### 1.3 radio类型(gender)
##### 1.3.1 gender验证
> * 单选可以为空，为空时值为属性设置中的默认值（gender默认值为男）；
> * 在excel中可以输入：男，莮，male，女，female；（此处支持这五种值）
> * 单元格的文本格式为默认方可；

##### 1.3.2 其他radio类型验证
> * 单选可以为空，为空时值为属性设置中的默认值；
> * 如果不为空，填写的值必须为属性设置中的值；
> * 单元格的文本格式为默认方可；
> * 具体操作：
1 单选属性为必填可见时；导入文档的标题中必须出现；
2 单选属性为不必填可见时，如若导入文档的标题中没有出现：
   * 插入时,为相应属性的默认值；更新时，为系统中原先的属性值；
3 单选属性为不必填可见时，如若导入文档的标题中出现：
   * 不管是插入还是更新，都为文档中文本的值；文本为空值导入后为属性的默认值；
   不为空就为文本中输入的合法的值；

#### 1.4 textarea类型
##### 1.4.1 textarea验证
> * 输入的格式为“aa\nbb\ncc”，也支持“xls”和“xlsx”文档中文字自带的回车换行；
> * 单元格的文本格式为默认方可；
> * 依据属性的设置进行必填的验证；

#### 1.5 checkbox类型
##### 1.5.1 checkbox验证
> * 如果有多个值，要用逗号隔开，逗号支持中英文两种格式，但是两者不可兼用；
> * 所输入的值中不能含有属性设置中不存在的值；
> * 也支持问此类型中重复值的处理，如："aa，bb，aa，aa"；
> * 单元格的文本格式为默认方可；
> * 依据属性的设置进行必填的验证；

#### 1.6 date类型
##### 1.6.1 date验证
> * 支持一种时间类型MM/DD/YYYY；
> * 如果时间类型为默认属性birthday，那么输入时间不能大于当前时间；
> * 依据属性的设置进行必填的验证；
> * csv中时间的文本格式为text；
> * xls中时间的文本格式为date下的03/07/01（输入必须为：03/07/2015，不能输入：03/07/05）；
> * xlsx中时间的文本格式为date下的03/07/01（输入必须为：03/07/2015，不能输入：03/07/05）；


如上整理如有疑问，请及时和lydiali联系，谢谢；